#include <iostream>
using namespace std;

typedef int Dado;
class noh{
	friend class fila;
	private:
		Dado dado;
		noh* proximo;
	public:
		noh(Dado num);
};

noh::noh(Dado num){
	dado = num;
	proximo = NULL;
}

class fila{
	private: 
		noh* inicio;
		noh* fim;
		int tamanho;
	public:
		fila();
		void enfileira(Dado valor);
		void enfileiraEsq(Dado valor);
		void enfileiraDir(Dado valor);
		int desenfileira();
		int desenfileiraEsq();
		int desenfileiraDir();
		void imprime();
		bool vazia();
		void reenfileira(int vetor[], int tam);
};

fila::fila(){
	inicio = NULL;
	fim = NULL;
	tamanho = 0;
}

void fila::enfileira(Dado valor){
	noh* aux = new noh(valor);
	
	
	if(inicio == NULL){
		inicio = aux;
		fim = aux;
	}
	
	else{
		fim->proximo = aux;
		fim = aux;
	}
	
	tamanho++;
}
void fila::enfileiraEsq(Dado valor){
	noh* aux = new noh(valor);
	
	
	if(inicio == NULL){
		inicio = aux;
		fim = aux;
	}
	
	else{
		fim->proximo = aux;
		fim = aux;
	}
	
	tamanho++;
}
void fila::enfileiraDir(Dado valor){
	noh* aux = new noh(valor);
	
	
	if(inicio == NULL){
		inicio = aux;
		fim = aux;
	}
	
	else{
		aux->proximo = inicio;
		inicio = aux;
	}
	
	tamanho++;
}
int fila::desenfileira(){
	noh* aux = inicio;
	int removido = inicio->dado;
	
	inicio = inicio->proximo;
	
	delete aux;
	
	tamanho--;
	
	return removido;
	
}
int fila::desenfileiraEsq(){
	noh* aux = fim;
	int removido;
	int tam = tamanho;
	int vetor[tam], i = 0;
	
	cout << inicio->dado << "dsd" << endl;
	
	while(aux != fim){
		vetor[i] = desenfileira();
		cout << vetor[i] << endl;
		aux = aux->proximo;
		i++;
	}
	
	removido = fim->dado;
	fim = aux;
	aux = aux->proximo;
	
	delete aux;
	
	reenfileira(vetor, tam-1);
	
	return removido;
	

	
}

bool fila::vazia(){
	return (inicio == NULL);
}

void fila::reenfileira(int vetor[], int tam){
	for (int i = 0; i < tam; i++)
	{
		enfileiraDir(vetor[i]);
	}
	
}

void fila::imprime(){
	int tam = tamanho-1;
	int vetor[tam], i = 0;
	
	cout << inicio->dado << "dsd" << endl;
	
	while(tamanho != 0){
		cout << inicio->dado << endl;
		vetor[i] = desenfileira();
		i++;
	}
	
	reenfileira(vetor, tam);
	
}

int main()
{
    fila novaFila;
    
    Dado valor, tam, num;
    
    cin >> tam;
    
    for (int i = 0; i < tam; i++)
	{
		cin >> valor;
		novaFila.enfileira(valor);
	}
	
	cout << endl;
	
	novaFila.imprime();
	
	cout << endl;
	
	num = novaFila.desenfileiraEsq();
	
	cout << endl << num << endl;
	
	novaFila.imprime();
	
	
    return 0;
}

