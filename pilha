#include <iostream>
using namespace std;

class noh{
	friend class pilha;

	private:
		int dado;
		noh* proximo;
	public: 
		noh(int num = 0);
	
};

noh::noh(int num){
	dado = num;
	proximo = NULL;
}

class pilha{
	private:
		noh* topo;
		int _tamanho;
	public:
		pilha();
		void empilha(int valor);
		int desempilha();
		int espia();
		void imprime();
		void reempilha(int vetor[], int tam);
		void xCy();
		void ex4(int num);
		void ex5(int n,int m);
		
};

pilha::pilha(){
	topo = NULL;
	_tamanho = 0;
}

void pilha::empilha(int valor){
	noh* aux = new noh;
	
	aux->dado = valor;
	aux->proximo = topo;
	topo = aux;
	_tamanho++;
	
}

int pilha::desempilha(){
	noh* aux;
	int removido;
	
	removido = topo->dado;
	aux = topo;
	topo = topo->proximo;
	delete aux;
	_tamanho--;
	
	return removido;
	
}

int pilha::espia(){
	return topo->dado;
}


void pilha::imprime(){
	int i = 0, tam = _tamanho;
	int aux, vetor[tam];
	while(_tamanho != 0){
		cout << topo->dado << endl;
		aux = desempilha();
		vetor[i] = aux;
		i++;
	}
	
	reempilha(vetor, tam);
	
}

void pilha::reempilha(int vetor[], int tam){
	for (int i = tam-1; i >= 0; i--)
	{
		empilha(vetor[i]);
	}
}

void pilha::xCy(){
	
	int tam = _tamanho;
	int vetor[tam];
	
	bool certo = true;
	
	for (int i = 0; i < tam; i++)
	{
		vetor[i] = desempilha();
	}
	
	int k = tam-1;
	
	if(tam%2 != 0){
		for (int i = 0; i < tam; i++){
			if(vetor[i] == vetor[k]){
				certo = true;
			}
			else{
				i = tam;
				certo = false;
			}
			k--;
		}
		
		if(certo == true){
			cout << "SIM" << endl;
		}
		else{
			cout << "NÃO" << endl;
		}
	}
	else{
		cout << "NÃO" << endl;
	}
	
	reempilha(vetor, tam);
	
	
}

void pilha::ex4(int num){
	int tam = _tamanho;
	int vetor[tam];
	int aux = 0;
	
	bool certo = true;
	for (int i = 0; i < tam; i++)
	{
		vetor[i] = desempilha();
	}
	
	while(aux < num){
		if(vetor[aux] == 1){
			certo = true;
		}
		else{
			certo = false;
			aux = num;
		}
		aux++;
	}
	aux = num;
	if(certo){
		if(vetor[aux] == 2){
				aux++;
				int index = tam-num-1;
				while(aux < index){
					if(vetor[aux] == 3){
						certo = true;
					}
					else{
						certo = false;
						aux = num;
					}
					aux++;
				}
				
				if(certo){
					aux = tam-num-1;
					if(vetor[aux] == 2){
						aux++;
						while(aux < tam){
							if(vetor[aux] == 1){
								certo = true;
							}
							else{
								certo = false;
								aux = num;
							}
						aux++;
						}
						if(certo){
							cout << "VERDADEIRO" << endl;
						}
						else{
							cout << "FALSO" << endl;
						}
					}
				}
				else{
					cout << "FALSO" << endl;
				}
		}
		else{
			cout << "FALSO" << endl;
		}
	}
	else{
		cout << "FALSO" << endl;
	}
	
	reempilha(vetor, tam);
}
void pilha::ex5(int n, int m){
	int tam = _tamanho;
	int vetor[tam];
	int aux = 0;
	
	bool certo = true;
	for (int i = 0; i < tam; i++)
	{
		vetor[i] = desempilha();
	}
	
	while(aux < n){
		if(vetor[aux] == 1){
			certo = true;
		}
		else{
			certo = false;
			aux = num;
		}
		aux++;
	}
	aux = num;
	if(certo){
		if(vetor[aux] == 3 or m == 0){
				aux++;
				int index = tam-num-1;
				while(aux < index){
					if(vetor[aux] == 3){
						certo = true;
					}
					else{
						certo = false;
						aux = num;
					}
					aux++;
				}
				
				if(certo){
					aux = tam-num-1;
					if(vetor[aux] == 2){
						aux++;
						while(aux < tam){
							if(vetor[aux] == 1){
								certo = true;
							}
							else{
								certo = false;
								aux = num;
							}
						aux++;
						}
						if(certo){
							cout << "VERDADEIRO" << endl;
						}
						else{
							cout << "FALSO" << endl;
						}
					}
				}
				else{
					cout << "FALSO" << endl;
				}
		}
		else{
			cout << "FALSO" << endl;
		}
	}
	else{
		cout << "FALSO" << endl;
	}
	
	reempilha(vetor, tam);
}

int main()
{
    pilha novaPilha;
    
    int valor, tam, n, m;
    
    cin >> n >> m;
    
    tam = 2*n+m;
    
    for (int i = 0; i < tam; i++)
	{
		cin >> valor;
		novaPilha.empilha(valor);
	}
	
	cout << endl;
	
	novaPilha.imprime();
	
	cout << endl;
	
	//novaPilha.xCy();
	//novaPilha.ex4(num);
	
    return 0;
}

